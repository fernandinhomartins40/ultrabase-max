# Development Dockerfile without frozen lockfile
FROM node:22-alpine

# Install pnpm
RUN npm install -g pnpm@9.15.5

WORKDIR /app

# Copy package files
COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./

# Install dependencies (allow lockfile updates)
RUN pnpm install

# Copy source
COPY . .

# Build
RUN pnpm build:studio

EXPOSE 3000
CMD ["pnpm", "dev"]
